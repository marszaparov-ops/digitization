<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>–ê—Ä—Ö–∏–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; margin: 40px; background-color: #f4f7f6; }
        .nav { margin-bottom: 20px; display: flex; justify-content: space-between; }
        table { width: 100%; border-collapse: collapse; background: white; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background-color: #2196F3; color: white; }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –±–ª–æ–∫–æ–≤ –∑–∞–≥—Ä—É–∑–∫–∏ */
        .upload-section { display: flex; gap: 20px; margin-top: 30px; align-items: flex-start; }
        .upload-box { background: white; padding: 25px; border-radius: 8px; flex: 1; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .scanner-box { background: #e3f2fd; border: 2px dashed #2196F3; padding: 25px; border-radius: 8px; flex: 1; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }

        input, select, textarea, button { display: block; width: 100%; margin-bottom: 15px; padding: 10px; box-sizing: border-box; }
        button { background: #2196F3; color: white; border: none; font-weight: bold; cursor: pointer; transition: 0.3s; }
        button:hover { background: #1976D2; }

        .btn-scan { background: #4CAF50; margin-top: 20px; font-size: 1.1em; }
        .btn-delete { background: #ff4d4d; width: auto; padding: 5px 10px; margin: 0; }
        .role-badge { font-size: 0.8em; padding: 3px 8px; border-radius: 10px; background: #eee; }
    </style>
</head>
<body>

<div class="nav">
    <div>
        <a sec:authorize="hasRole('ADMIN')" href="/admin/users">‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</a>
    </div>
    <div>
        <span>–í—ã –≤–æ—à–ª–∏ –∫–∞–∫: <b sec:authentication="name">User</b>
        <span class="role-badge" sec:authentication="principal.authorities">Role</span></span>
        <a href="/logout" style="margin-left: 15px; color: red;">–í—ã–π—Ç–∏</a>
    </div>
</div>

<h2>–ê—Ä—Ö–∏–≤ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</h2>

<table>
    <thead>
    <tr>
        <th>ID</th>
        <th>‚Ññ –î–æ–∫.</th>
        <th>–ù–∞–∑–≤–∞–Ω–∏–µ (—Å–∫–∞—á–∞—Ç—å)</th>
        <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
        <th sec:authorize="hasRole('ADMIN')">–î–µ–π—Å—Ç–≤–∏–µ</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="doc : ${documents}">
        <td th:text="${doc.id}"></td>
        <td th:text="${doc.docNumber}"></td>
        <td>
            <a th:href="@{/archive/download/{id}(id=${doc.id})}" th:text="${doc.title}" style="color: #2196F3; font-weight: bold; text-decoration: none;"></a>
        </td>
        <td th:text="${doc.category}"></td>
        <td sec:authorize="hasRole('ADMIN')">
            <form th:action="@{/archive/delete/{id}(id=${doc.id})}" method="post" onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç?');">
                <button type="submit" class="btn-delete">–£–¥–∞–ª–∏—Ç—å</button>
            </form>
        </td>
    </tr>
    </tbody>
</table>

<div class="upload-section" sec:authorize="hasAnyRole('ADMIN', 'USER')">

    <div class="upload-box">
        <h3>üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å –∫–æ–º–ø—å—é—Ç–µ—Ä–∞</h3>
        <form th:action="@{/archive/upload}" method="post" enctype="multipart/form-data">
            <input type="text" name="title" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ (–Ω–∞–ø—Ä. –î–æ–≥–æ–≤–æ—Ä –ø–æ—Å—Ç–∞–≤–∫–∏)" required>
            <input type="text" name="docNumber" placeholder="–ù–æ–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞">

            <select name="category">
                <option value="–ü—Ä–∏–∫–∞–∑">–ü—Ä–∏–∫–∞–∑</option>
                <option value="–î–æ–≥–æ–≤–æ—Ä">–î–æ–≥–æ–≤–æ—Ä</option>
                <option value="–ü–∏—Å—å–º–æ">–í—Ö–æ–¥—è—â–µ–µ –ø–∏—Å—å–º–æ</option>
                <option value="–î—Ä—É–≥–æ–µ">–î—Ä—É–≥–æ–µ</option>
            </select>

            <textarea name="description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞"></textarea>
            <input type="file" name="file" required>
            <button type="submit">‚úÖ –î–æ–±–∞–≤–∏—Ç—å –≤ –∞—Ä—Ö–∏–≤</button>
        </form>
    </div>

    <div class="scanner-box">
        <h3>üñ®Ô∏è –°–∫–∞–Ω–µ—Ä BookTEK 5</h3>
        <p>–ü–æ–ª–æ–∂–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç –≤ —Å–∫–∞–Ω–µ—Ä –∏ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ñ–∞–π–ª–∞ –ø–æ —Å–µ—Ç–∏.</p>
        <div style="font-size: 3em; margin: 10px;">üìÑ</div>
        <form th:action="@{/archive/scan-refresh}" method="get">
            <button type="submit" class="btn-scan">üöÄ –ü–æ–ª—É—á–∏—Ç—å —Å–æ —Å–∫–∞–Ω–µ—Ä–∞</button>
        </form>
        <small style="color: #666;">–°–∫–∞–Ω–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –ø–∞–ø–∫—É /uploads</small>
    </div>

</div>

</body>
</html>